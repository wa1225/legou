(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-462eb0fc"],{a9c7:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-bread"),i("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:t.add}},[t._v("添加")]),i("v-list",{attrs:{list:t.list},on:{edit:t.edit,init:t.init}}),i("v-dialog",{ref:"diaRef",attrs:{diainfo:t.diainfo},on:{cancle:t.cancle,init:t.init}}),i("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.pageinfo.count,"page-size":t.pageinfo.size},on:{"current-change":t.changpage}})],1)},a=[],o=i("5b78"),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,border:""}},[i("el-table-column",{attrs:{prop:"uid",label:"用户编号",width:"320"}}),i("el-table-column",{attrs:{prop:"username",label:"用户名称",width:"180"}}),i("el-table-column",{attrs:{prop:"rolename",label:"所属角色",width:"180"}}),i("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",[1==e.row.status?i("el-tag",{attrs:{type:"success"}},[t._v("启用")]):i("el-tag",{attrs:{type:"danger"}},[t._v("禁用")])],1)]}}])}),i("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(i){return t.edit(e.row.uid)}}},[t._v("编辑")]),i("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(i){return t.del(e.row.uid)}}},[t._v("删除")])]}}])})],1)],1)},l=[],r={props:["list"],data:function(){return{}},methods:{edit:function(t){this.$emit("edit",t)},del:function(t){var e=this;this.$confirm("你确定要删除这条数据吗？？？?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(o["n"])({uid:t}).then((function(t){e.$message.success(t.msg),e.$emit("init")}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))}}},c=r,u=(i("f9aa"),i("2877")),f=Object(u["a"])(c,s,l,!1,null,"7b819414",null),d=f.exports,m=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{title:t.diainfo.isAdd?"添加管理员":"编辑管理员",visible:t.diainfo.isshow,"before-close":t.cancle},on:{"update:visible":function(e){return t.$set(t.diainfo,"isshow",e)}}},[i("el-form",{ref:"mangform",attrs:{model:t.mangform,rules:t.rules}},[i("el-form-item",{attrs:{label:"所属角色","label-width":t.formLabelWidth,prop:"roleid"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.mangform.roleid,callback:function(e){t.$set(t.mangform,"roleid",e)},expression:"mangform.roleid"}},t._l(t.manglist,(function(t){return i("el-option",{key:t.id,attrs:{label:t.rolename,value:t.id}})})),1)],1),i("el-form-item",{attrs:{label:"用户名称","label-width":t.formLabelWidth,prop:"username"}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:t.mangform.username,callback:function(e){t.$set(t.mangform,"username",e)},expression:"mangform.username"}})],1),i("el-form-item",{attrs:{label:"密码","label-width":t.formLabelWidth}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:t.mangform.password,callback:function(e){t.$set(t.mangform,"password",e)},expression:"mangform.password"}})],1),i("el-form-item",{attrs:{label:"状态","label-width":t.formLabelWidth}},[i("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":1,"inactive-value":2},model:{value:t.mangform.status,callback:function(e){t.$set(t.mangform,"status",e)},expression:"mangform.status"}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.cancle}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v("确 定")])],1)],1)],1)},g=[],p={props:["diainfo"],data:function(){return{dialogFormVisible:!0,mangform:{roleid:"",username:"",password:"",status:1},manglist:[],formLabelWidth:"120px",rules:{username:[{required:!0,message:"请输入角色名称",trigger:"blur"},{min:2,max:6,message:"长度在 2 到 6 个字符",trigger:"blur"}],roleid:[{required:!0,message:"请选择上级菜单",trigger:"blur"}]}}},methods:{lookup:function(t){var e=this;Object(o["G"])({uid:t}).then((function(i){200==i.code&&(e.mangform=i.list,e.mangform.uid=t,e.mangform.password="")}))},cancle:function(){this.$emit("cancle",!1),this.reset()},reset:function(){this.mangform={roleid:"",username:"",password:"",status:1},this.$refs.mangform.resetFields()},confirm:function(){var t=this;this.$refs.mangform.validate((function(e){e&&(t.diainfo.isAdd?Object(o["a"])(t.mangform).then((function(e){200==e.code&&(t.cancle(),t.$emit("init"))})):Object(o["p"])(t.mangform).then((function(e){200==e.code&&(t.cancle(),t.$emit("init"))})))}))}},mounted:function(){var t=this;Object(o["t"])().then((function(e){200==e.code&&(t.manglist=e.list)}))}},h=p,b=Object(u["a"])(h,m,g,!1,null,"35c239d8",null),v=b.exports,w={data:function(){return{diainfo:{isshow:!1,isAdd:!0},pageinfo:{size:2,page:1,count:0},list:[]}},components:{vList:d,vDialog:v},mounted:function(){this.init()},methods:{getcount:function(){var t=this;Object(o["F"])().then((function(e){200==e.code&&(console.log(e.list[0].total),t.pageinfo.count=e.list[0].total)}))},getlist:function(){var t=this;Object(o["H"])({size:this.pageinfo.size,page:this.pageinfo.page}).then((function(e){if(200==e.code){if(t.list=e.list?e.list:[],t.pageinfo.page>1&&0==t.list.length)return t.pageinfo.page--,void t.getlist();t.list=e.list,console.log(t.list)}}))},init:function(){this.getcount(),this.getlist()},add:function(){this.diainfo.isshow=!0,this.diainfo.isAdd=!0},edit:function(t){this.diainfo.isshow=!0,this.diainfo.isAdd=!1,this.$refs.diaRef.lookup(t)},cancle:function(t){this.diainfo.isshow=!1},changpage:function(t){console.log(t),this.pageinfo.page=t,this.getlist()}}},$=w,k=(i("b5ea"),Object(u["a"])($,n,a,!1,null,"f6219630",null));e["default"]=k.exports},b5ea:function(t,e,i){"use strict";i("d8f0")},ba45:function(t,e,i){},d8f0:function(t,e,i){},f9aa:function(t,e,i){"use strict";i("ba45")}}]);
//# sourceMappingURL=chunk-462eb0fc.40c848ed.js.map